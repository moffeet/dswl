# ç‰©æµé…é€ç®¡ç†ç³»ç»Ÿ

åŸºäº NestJS + Next.js + MySQL çš„ç‰©æµé…é€ç®¡ç†ç³»ç»Ÿï¼ŒåŒ…å«åç«¯æœåŠ¡ã€ç®¡ç†åå°å’Œå°ç¨‹åºå‰ç«¯ä¸‰ä¸ªæ¨¡å—ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.18.0 (æ¨èä½¿ç”¨ v20.x)
- **MySQL**: >= 5.7 æˆ– 8.0+
- **npm**: >= 8.0.0

### æœåŠ¡ç®¡ç†

ä½¿ç”¨ `ser.sh` è„šæœ¬ç®¡ç†æ‰€æœ‰æœåŠ¡ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
./ser.sh                    # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./ser.sh status            # æŸ¥çœ‹æœåŠ¡çŠ¶æ€

# å¯åŠ¨æœåŠ¡
./ser.sh start all         # å¯åŠ¨æ‰€æœ‰æœåŠ¡
./ser.sh start backend     # åªå¯åŠ¨åç«¯
./ser.sh start admin       # åªå¯åŠ¨ç®¡ç†åå°
./ser.sh start frontend    # åªå¯åŠ¨å°ç¨‹åºå‰ç«¯

# åœæ­¢æœåŠ¡
./ser.sh stop all          # åœæ­¢æ‰€æœ‰æœåŠ¡
./ser.sh stop backend      # åªåœæ­¢åç«¯
./ser.sh stop admin        # åªåœæ­¢ç®¡ç†åå°
./ser.sh stop frontend     # åªåœæ­¢å°ç¨‹åºå‰ç«¯

# é‡å¯æœåŠ¡
./ser.sh restart all       # é‡å¯æ‰€æœ‰æœåŠ¡
./ser.sh restart backend   # åªé‡å¯åç«¯
./ser.sh restart admin     # åªé‡å¯ç®¡ç†åå°
./ser.sh restart frontend  # åªé‡å¯å°ç¨‹åºå‰ç«¯
```

### å…¼å®¹æ€§è„šæœ¬

```bash
./start-dev.sh      # å¯åŠ¨å¼€å‘ç¯å¢ƒ (ç­‰åŒäº ./ser.sh start all)
./stop-dev.sh       # åœæ­¢å¼€å‘ç¯å¢ƒ (ç­‰åŒäº ./ser.sh stop all)
./start-prod.sh     # å¯åŠ¨ç”Ÿäº§ç¯å¢ƒ
./stop-prod.sh      # åœæ­¢ç”Ÿäº§ç¯å¢ƒ
```

## ğŸ“± è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåå¯ä»¥è®¿é—®ï¼š

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| **åç«¯API** | http://localhost:3000 | åç«¯æœåŠ¡ä¸»åœ°å€ |
| **APIæ–‡æ¡£** | http://localhost:3000/api | Swagger APIæ–‡æ¡£ |
| **ç®¡ç†åå°** | http://localhost:3001 | ç®¡ç†å‘˜æ“ä½œç•Œé¢ |
| **å°ç¨‹åºå‰ç«¯** | http://localhost:3002 | å°ç¨‹åºå¼€å‘é¢„è§ˆ |

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å°ç¨‹åºå‰ç«¯     â”‚    â”‚   ç®¡ç†åå°       â”‚    â”‚   åç«¯API       â”‚
â”‚  (Next.js 15)   â”‚    â”‚  (Next.js 15)   â”‚    â”‚   (NestJS 10)   â”‚
â”‚   ç«¯å£: 3002     â”‚    â”‚   ç«¯å£: 3001     â”‚    â”‚   ç«¯å£: 3000     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MySQL 8.0     â”‚
                    â”‚   (æ•°æ®å­˜å‚¨)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### åç«¯æœåŠ¡ (backend-node)
- **æ¡†æ¶**: NestJS 10.x + TypeScript 5.x
- **æ•°æ®åº“**: MySQL 8.0 + TypeORM 0.3.x
- **è®¤è¯**: JWT + bcrypt + CASLæƒé™æ§åˆ¶
- **APIæ–‡æ¡£**: Swagger/OpenAPI 3.0
- **æ–‡ä»¶ä¸Šä¼ **: Multer + æœ¬åœ°å­˜å‚¨

#### ç®¡ç†åå° (admin-frontend)
- **æ¡†æ¶**: Next.js 15.3.4 + Turbopack
- **UIåº“**: Arco Design + TailwindCSS 3.x
- **çŠ¶æ€ç®¡ç†**: React Hooks + Axios
- **è¡¨å•**: React Hook Form

#### å°ç¨‹åºå‰ç«¯ (frontend)
- **æ¡†æ¶**: Next.js 15.3.4 + å“åº”å¼è®¾è®¡
- **åœ°å›¾**: é«˜å¾·åœ°å›¾ Web API
- **å¤šåª’ä½“**: Web API (ç›¸æœº + åœ°ç†ä½ç½®)

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
wlxt/
â”œâ”€â”€ backend-node/           # NestJS åç«¯æœåŠ¡ (ç«¯å£ 3000)
â”œâ”€â”€ admin-frontend/         # Next.js ç®¡ç†åå° (ç«¯å£ 3001)
â”œâ”€â”€ frontend/              # Next.js å°ç¨‹åºå‰ç«¯ (ç«¯å£ 3002)
â”œâ”€â”€ ser.sh                # æœåŠ¡ç®¡ç†è„šæœ¬ (ä¸»è„šæœ¬)
â”œâ”€â”€ start-dev.sh          # å¼€å‘ç¯å¢ƒå¯åŠ¨ (å…¼å®¹æ€§)
â”œâ”€â”€ stop-dev.sh           # å¼€å‘ç¯å¢ƒåœæ­¢ (å…¼å®¹æ€§)
â”œâ”€â”€ start-prod.sh         # ç”Ÿäº§ç¯å¢ƒå¯åŠ¨
â”œâ”€â”€ stop-prod.sh          # ç”Ÿäº§ç¯å¢ƒåœæ­¢
â”œâ”€â”€ init.sql              # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ logs/                 # è¿è¡Œæ—¥å¿—ç›®å½•
â””â”€â”€ pids/                 # è¿›ç¨‹IDç®¡ç†ç›®å½•
```

## ğŸ” é»˜è®¤è´¦å·

### ç®¡ç†åå°ç™»å½•
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

### æµ‹è¯•å¸æœºè´¦å·
- å¼ ä¸‰ï¼š13800000001
- æå››ï¼š13800000002
- ç‹äº”ï¼š13800000003

## ğŸ“‹ æ•°æ®åº“é…ç½®

```javascript
// é»˜è®¤é…ç½® (backend-node/src/config/database.config.ts)
{
  host: 'localhost',
  port: 3306,
  username: 'root',
  password: '123456',
  database: 'delivery_system'
}
```

### å¿«é€Ÿåˆå§‹åŒ–æ•°æ®åº“
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE IF NOT EXISTS delivery_system"

# å¯¼å…¥åˆå§‹åŒ–è„šæœ¬
mysql -u root -p delivery_system < init.sql
```

## ğŸš¨ å¿«é€Ÿéƒ¨ç½²

### 1. å…‹éš†ä»£ç 
```bash
git clone <é¡¹ç›®ä»“åº“åœ°å€>
cd wlxt
```

### 2. å®‰è£…ä¾èµ–
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
cd backend-node && npm install && cd ..
cd admin-frontend && npm install && cd ..
cd frontend && npm install && cd ..
```

### 3. å¯åŠ¨æœåŠ¡
```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
./ser.sh start all

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./ser.sh status
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Node.js ç‰ˆæœ¬è¦æ±‚
```bash
# æ£€æŸ¥ç‰ˆæœ¬
node --version  # éœ€è¦ >= 18.18.0

# ä½¿ç”¨ nvm å‡çº§
nvm install 20 && nvm use 20 && nvm alias default 20
```

### ç«¯å£å†²çª
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
./ser.sh stop all

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./ser.sh status
```

### ä¾èµ–é—®é¢˜
```bash
# æ¸…ç†é‡æ–°å®‰è£…
cd ç›®æ ‡ç›®å½•
rm -rf node_modules package-lock.json
npm install
```

## ğŸ“ æ”¯æŒä¸æ–‡æ¡£

### è¿è¡Œæ—¥å¿—
- åç«¯æ—¥å¿—: `logs/backend.log`
- ç®¡ç†åå°æ—¥å¿—: `logs/admin.log`
- å°ç¨‹åºå‰ç«¯æ—¥å¿—: `logs/frontend.log`

### è¯¦ç»†æ–‡æ¡£
- [ğŸ“š å®Œæ•´æ–‡æ¡£ç›®å½•](./docs/) - ç³»ç»Ÿå®Œæ•´çš„æŠ€æœ¯æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### ç®¡ç†åå°åŠŸèƒ½
- âœ… **å®¢æˆ·ç®¡ç†**: å®¢æˆ·ä¿¡æ¯CRUDã€æœç´¢ç­›é€‰ã€æ‰¹é‡æ“ä½œ
- âœ… **ç”¨æˆ·ç®¡ç†**: ç”¨æˆ·è´¦å·ç®¡ç†ã€æƒé™åˆ†é…
- âœ… **è§’è‰²æƒé™**: åŸºäºRBACçš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- âœ… **å¸æœºç®¡ç†**: å¸æœºä¿¡æ¯ç®¡ç†å’Œè½¦è¾†é…ç½®
- âœ… **æ‰“å¡è®°å½•**: é…é€è®°å½•æŸ¥çœ‹ã€å›¾ç‰‡é¢„è§ˆ
- âœ… **æ•°æ®ç»Ÿè®¡**: ä¸šåŠ¡æ•°æ®åˆ†æå’ŒæŠ¥è¡¨

### å°ç¨‹åºç«¯åŠŸèƒ½
- âœ… **èº«ä»½è®¤è¯**: å¾®ä¿¡ç™»å½•ã€æ‰‹æœºå·è·å–ã€å¸æœºéªŒè¯
- âœ… **å®¢æˆ·æœç´¢**: æ”¯æŒç¼–å·/å§“å/åœ°å€æ¨¡ç³Šæœç´¢
- âœ… **å¯¼èˆªåŠŸèƒ½**: é«˜å¾·åœ°å›¾å¤šç›®çš„åœ°è·¯çº¿è§„åˆ’
- âœ… **æ‹ç…§æ‰“å¡**: åœ°ç†ä½ç½®è·å–ã€å›¾ç‰‡ä¸Šä¼ 
- âœ… **æ–°å¢å®¢æˆ·**: é”€å”®äººå‘˜æ·»åŠ æ–°å®¢æˆ·åŠŸèƒ½

---

**ğŸš€ å¿«é€Ÿå¼€å§‹**: è¿è¡Œ `./ser.sh start all` å³å¯å¯åŠ¨æ•´ä¸ªç³»ç»Ÿï¼ 